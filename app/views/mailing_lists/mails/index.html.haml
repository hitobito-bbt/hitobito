-#  Copyright (c) 2012-2017, Jungwacht Blauring Schweiz. This file is part of
-#  hitobito and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito.

- title t('mails.manage')

= section_table(t('mails.mailboxes.inbox'), @mails[:inbox_mails]) do |m|

  %td
    = m.subject
  %td
    = m.sender
  %td
    = m.date
  %td

    = link_to t('mails.mailboxes.spam'),
            mailing_lists_mail_move_path(mail_mailbox: m.mailbox, uid: m.uid, move_to: 'SPAMMING'),
            class: 'action',
            title: t("mails.move_spam"),
            data: { method: :patch }

    = link_to t('mails.mailboxes.failed'),
        mailing_lists_mail_move_path(mail_mailbox: m.mailbox, uid: m.uid, move_to: 'FAILED'),
        class: 'action',
        title: t("mails.move_failed"),
        data: { method: :patch }

    = link_to icon(:'trash-alt', filled: false),
            '',
            class: 'action',
            title: ti(:"link.delete"),
            alt: ti(:"link.delete"),
            data: { confirm: ti(:confirm_delete),
                    method: :delete,
                   }

= section_table(t('mails.mailboxes.spam'), @mails[:spam_mails]) do |m|

  %td
    = m.subject
  %td
    = m.sender
  %td
    = m.date
  %td

    = link_to t('mails.mailboxes.inbox'),
            mailing_lists_mail_move_path(mail_mailbox: m.mailbox, uid: m.uid, move_to: 'INBOX'),
            class: 'action',
            title: t("mails.move_inbox"),
            data: { method: :patch }

    = link_to t('mails.mailboxes.failed'),
        mailing_lists_mail_move_path(mail_mailbox: m.mailbox, uid: m.uid, move_to: 'FAILED'),
        class: 'action',
        title: t("mails.move_failed"),
        data: { method: :patch }

    = link_to icon(:'trash-alt', filled: false),
            '',
            class: 'action',
            title: ti(:"link.delete"),
            alt: ti(:"link.delete"),
            data: { confirm: ti(:confirm_delete),
                    method: :delete,
                   }

= section_table(t('mails.mailboxes.failed'), @mails[:spam_mails]) do |m|

  %td
    = m.subject
  %td
    = m.sender
  %td
    = m.date
  %td

    = link_to t('mails.mailboxes.inbox'),
            mailing_lists_mail_move_path(mail_mailbox: m.mailbox, uid: m.uid, move_to: 'INBOX'),
            class: 'action',
            title: t("mails.move_inbox"),
            data: { method: :patch }

    = link_to t('mails.mailboxes.spam'),
        mailing_lists_mail_move_path(mail_mailbox: m.mailbox, uid: m.uid, move_to: 'SPAMMING'),
        class: 'action',
        title: t("mails.move_spam"),
        data: { method: :patch }

    = link_to icon(:'trash-alt', filled: false),
            '',
            class: 'action',
            title: ti(:"link.delete"),
            alt: ti(:"link.delete"),
            data: { confirm: ti(:confirm_delete),
                    method: :delete,
                   }
