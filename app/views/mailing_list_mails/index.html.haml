-#  Copyright (c) 2012-2021, Hitobito AG. This file is part of
-#  hitobito and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/hitobito/hitobito.

- title t('mails.manage')
= FilterNavigation::MailingList::Mails.new(self).to_s

= section_table(t('mails.mailboxes.' + param_mailbox.to_s.downcase), @mails) do |m|

  %td
    = m.subject
  %td
    = m.sender
  %td
    = m.date
  %td

    = link_to t('mails.mailboxes.inbox'),
            mailbox_move_path(mailbox_id: m.mailbox, uid: m.uid, move_to: 'INBOX'),
            class: 'action',
            title: t("mails.move_inbox"),
            data: { method: :patch }

    = link_to t('mails.mailboxes.spam'),
        mailbox_move_path(mailbox_id: m.mailbox, uid: m.uid, move_to: 'SPAMMING'),
        class: 'action',
        title: t("mails.move_spam"),
        data: { method: :patch }

    = link_to icon(:'trash-alt', filled: false),
            '',
            class: 'action',
            title: ti(:"link.delete"),
            alt: ti(:"link.delete"),
            data: { confirm: ti(:confirm_delete),
                    method: :delete,
                   }


